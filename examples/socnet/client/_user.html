<!-- params:  -->
<!--   user: User -->
<template name="user_avatar">
{{#if user}}
  <!-- <img src="/images/gnuhead.png" width="45"/> -->
  <!-- <img src="/images/{{this.user.name}}.jpg" width="45"/> -->
  <img {{editableField obj=user fld="avatar"}} src="{{user.avatarLink}}" width="45" height="45"/>
{{else}}
  <img src="/images/anonymous-50x50.png" width="45" height="45"/>
{{/if}}
</template>

<template name="_user">
    <div class="User list-group-item {{#if isMe this.user}}me{{/if}}">
      {{#if avatar}}
        {{> user_avatar user=user}}
      {{/if}}
      <div class="user-name-status">
        {{#if editableName}}
          <h4 class="list-group-item-heading"
              {{editableField obj=this.user fld="name"}}>
            {{salute this.user}}
          </h4>
        {{else}}
          <h4 class="list-group-item-heading">{{salute this.user}}</h4>
        {{/if}}
        {{#if status}}
          <p class="list-group-item-text">
            <a {{editableField obj=this.user fld="status"}}>{{this.user.statusText}}</a>
          </p>
        {{/if}}
      </div>
    </div>
</template>

<!-- params:  -->
<!--   user: User -->
<template name="network_by_users">
  <ul>
  {{#each user.network.groupByRange}}
  <li style="margin: 1px">
    <div class="inlineb top">{{> user_avatar user=this.key}}</div>
    <div class="inlineb top">
      <div>
        <span class="friend_name">{{this.key.name}}</span> (<span class="friend_email">{{this.key.email}}</span>)
      </div>
      <div>
        {{#each this.value}}<span class="friend_kind label label-primary">{{this.first}}</span>{{/each}}
      </div>
    </div>
  </li>
  {{/each}}
  </ul>
</template>

<!-- params:  -->
<!--   user: User -->
<template name="user_profile">
  <div class="row user_profile_top">
    {{> user_avatar user=user}}
    <div class="user_info">
      <span id="profile_name" {{editableField obj=user fld="name"}}>{{user.name}}</span><br>
      <span {{editableField obj=user fld="email"}}><i class="icon-envelope"></i>&nbsp;{{user.email}}</span><br>
      <span {{editableField obj=user fld="location"}}><i class="icon-globe"></i>&nbsp;{{user.location}}</span>
    </div>
    <div class="user_status">
      <div class="status_label">Status:</div>
      <span id="profile_status" {{editableField obj=user fld="status"}}>{{user.statusText}}</span><br>
    </div>
  </div>
  <div class="row user_profile_bottom">
    <div class="span4 user_network">
      <div class="network_label">Network ({{user.network.length}})</div>
      {{> network_by_users user=user}}
    </div>
    <div class="span8 user_wall">
      <div class="wall_label">Wall</div>
      <div {{PostEvent to=user}}>
        <textarea class="form-control" rows="3" {{PostEvent_text}}></textarea>
        <button class="btn btn-primary" {{sunny_trigger}}>Post</button>
      </div>
      <div class="posts">
        {{#each user.wall}}
        <div class="post">
          <div class="post_date">
            Posted on: {{this.timeFormatted}} by {{this.author.name}}
            <span class="delete_post glyphicon glyphicon-remove"
                  {{Destroy obj=this}} {{sunny_trigger}}
                  ></span>
          </div>
          <div class="post_author">{{> user_avatar user=this.author}}</div>
          <div class="post_body">
          {{#each body}}
            {{#if isText}}
              <span class="text_chunk">{{this.text}}</span>
            {{/if}}
            {{#if isUserTag}}
              <span class="inline_user">{{> user_avatar user=this.user}}</span>
            {{/if}}
            {{#if isHashTag}}
              <span class="label label-warn inline_hashtag">{{this.tag}}</span>
            {{/if}}
          {{/each}}          
          </div>
          <div class="post_tags"></div>
          <div class="post_peeps"></div>
        </div>
        {{/each}}
      </div>
    </div>
  </div>
</template>




















<!-- <template name="_friend"> -->
<!--     <div class="User list-group-item {{#if isMe this.user}}me{{/if}}"> -->
<!--         {{#if this.user}} -->
<!--           <img src="/images/gnuhead.png" width="45"/> -->
<!--         {{else}} -->
<!--           <img src="/images/anonymous-50x50.png" width="45"/> -->
<!--         {{/if}} -->
<!--       <div class="user-name-status"> -->
<!--         {{#if editableName}} -->
<!--           <h4 class="list-group-item-heading" -->
<!--               {{editableField obj=this.user fld="name"}}> -->
<!--             {{salute this.user}} -->
<!--           </h4> -->
<!--         {{else}} -->
<!--           <h4 class="list-group-item-heading">{{salute this.user}}</h4> -->
<!--         {{/if}} -->
<!--       </div> -->
<!--       <h4>as:  -->
<!--       <a {{editableField obj=this.relation fld="kind"}} style="color:inherit;">{{this.relation.relation_type}}</a> -->
<!--       </h4> -->
<!--       <div style="margin-top: 5px; width: 225px;"> -->
<!--         <button class="view-user-album" onclick="viewUserAlbum('{{this.user.id}}')">View Album</button> -->
<!--       </div> -->
      
<!--     </div> -->
<!-- </template> -->

<!-- <template name="_request"> -->
<!--     <div class="User list-group-item"> -->
<!--       {{#if this.from}} -->
<!--         <img src="/images/gnuhead.png" width="45"/> -->
<!--       {{else}} -->
<!--         <img src="/images/anonymous-50x50.png" width="45"/> -->
<!--       {{/if}} -->
<!--       <div class="user-name-status"> -->
<!--         {{#if editableName}} -->
<!--           <h4 class="list-group-item-heading"> -->
<!--             {{salute this.from}} -->
<!--           </h4> -->
<!--         {{else}} -->
<!--           <h4 class="list-group-item-heading">{{salute this.from}}</h4> -->
<!--         {{/if}} -->
<!--           <div {{ConfirmRelation relation=this}} class="AddTagForm form-inline"  -->
<!--         onkeypress="return event.keyCode != 13;"> -->
<!--           <button class="btn btn-default SendMsg"  -->
<!--                  {{sunny_trigger}}> -->
<!--            Confirm -->
<!--           </button> -->
<!--         </div> -->
<!--       </div> -->
<!--     </div> -->
<!-- </template> -->

<!-- <template name="_pending"> -->
<!--     <div class="User list-group-item"> -->
<!--       {{#if this.to}} -->
<!--         <img src="/images/gnuhead.png" width="45"/> -->
<!--       {{else}} -->
<!--         <img src="/images/anonymous-50x50.png" width="45"/> -->
<!--       {{/if}} -->
<!--       <div class="user-name-status"> -->
<!--         {{#if editableName}} -->
<!--           <h4 class="list-group-item-heading"> -->
<!--             {{salute this.to}} -->
<!--           </h4> -->
<!--         {{else}} -->
<!--           <h4 class="list-group-item-heading">{{salute this.to}}</h4> -->
<!--         {{/if}} -->
<!--           <div>Request Pending</div> -->
<!--       </div> -->
<!--     </div> -->
<!-- </template> -->

<!-- <template name="_other"> -->
<!--     <div class="User list-group-item {{#if isMe this.user}}me{{/if}}"> -->
<!--       {{#if avatar}} -->
<!--         {{#if user}} -->
<!--           <img src="/images/gnuhead.png" width="45"/> -->
<!--         {{else}} -->
<!--           <img src="/images/anonymous-50x50.png" width="45"/> -->
<!--         {{/if}} -->
<!--       {{/if}} -->
<!--       <div class="user-name-status"> -->
<!--         {{#if editableName}} -->
<!--           <h4 class="list-group-item-heading" -->
<!--               {{editableField obj=this.user fld="name"}}> -->
<!--             {{salute this.user}} -->
<!--           </h4> -->
<!--         {{else}} -->
<!--           <h4 class="list-group-item-heading">{{salute this.user}}</h4> -->
<!--         {{/if}} -->
<!--       </div> -->
<!--       <div {{CreateRelation fromU=currentuser toU=this.user}} class="AddTagForm form-inline"  -->
<!--       onkeypress="return event.keyCode != 13;"> -->
<!--         <div class="form-group"> -->
<!--           <input type="text" name="type"  -->
<!--                   placeholder="Enter Type" -->
<!--                   {{CreateRelation_type}}/> -->
<!--         </div> -->
<!--         <button class="btn btn-default SendMsg"  -->
<!--                {{sunny_trigger}}> -->
<!--          Request as Friend -->
<!--         </button> -->
<!--       </div> -->
<!--     </div> -->
<!-- </template> -->
